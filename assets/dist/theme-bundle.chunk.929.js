"use strict";(self.webpackChunkpapathemes_kitchenary=self.webpackChunkpapathemes_kitchenary||[]).push([[929],{70929:(t,e,o)=>{o.r(e),o.d(e,{default:()=>M});var i=o(38221),s=o.n(i),n=o(98368),a=o(7350),r=o.n(a),d=o(4621),c=o(46818),l=o(33270),h=function(){function t(t){var e=t.id,o=t.index,i=void 0===o?0:o,s=t.sort,n=void 0===s?"":s,a=t.limit,r=void 0===a?"":a,d=t.$parent;this.onLoadMore=this.onLoadMore.bind(this),this.onCollapse=this.onCollapse.bind(this),this.id=e,this.currentCategoryId=e,this.index=i,this.sort=n,this.limit=r,this.page=1,this.$parent=d,this.$scope=l('<div class="papathemes-pbcst-loading"></div>'),this.$shopBtn=l(),this.$loadMore=l(),this.$collapse=l(),this.$loader=l(),this.$parent.append(this.$scope),this.init()}var e=t.prototype;return e.init=function(){var t=this,e=this.limit?"&limit="+this.limit:"",o=this.sort?"&sort="+this.sort:"";d.Ay.api.getPage("/categories.php?category="+this.currentCategoryId+e+o,{template:"papathemes/pbcst/section"},(function(e,o){if(e||!o||o.error)t.$scope.remove();else{var i=l(o);t.$scope.replaceWith(i),t.$scope=i,t.$content=t.$scope.find("[data-pbcst-products-placement]"),t.$loader=t.$scope.find(".loader"),t.initTabs(),t.initSlick(),t.initWidgetRegion(),t.initButtons()}}))},e.loadProducts=function(t){var e=this,o=this.currentCategoryId||this.id,i=this.limit?"&limit="+this.limit:"",s=this.sort?"&sort="+this.sort:"",n=this.page?"&page="+this.page:"";this.$loader.addClass("loading"),d.Ay.api.getPage("/categories.php?category="+o+i+s+n,{template:"papathemes/pbcst/products"},(function(o,i){if(e.$loader.removeClass("loading"),!o&&i){var s=l(i),n=e.$content.find("[data-current-page]");n.length>0?(n.data({currentPage:s.data("currentPage"),hasNextPage:Boolean(s.data("hasNextPage"))}),n.find(".productGrid").append(s.find(".productGrid").children())):e.$content.html(i),e.$content.find(".product._hideOnTabletWhenNoBanner").removeClass("_hideOnTabletWhenNoBanner"),e.initSlick(),s.data("hasNextPage")?e.$loadMore.show():e.$loadMore.hide(),s.data("currentPage")>1?e.$collapse.show():e.$collapse.hide(),e.$shopBtn.get().map((function(t){return l(t)})).forEach((function(t){return t.text(t.data("text").replace("{name}",s.data("categoryName")))})),e.$shopBtn.attr("href",s.data("categoryUrl")),"function"==typeof t&&t()}}))},e.initTabs=function(){var t=this;(0,c.A)(this.$scope),l("[data-tab]",this.$scope).on("toggled",(function(e,o){var i=o.find("a"),s=i.data("pbcstSort")||t.sort,n=i.data("pbcstSubcategoryId");n&&n===t.currentCategoryId&&(o.removeClass("is-active"),o.find(".tab-title").prop("aria-selected",!1),n=t.id);var a=n||t.currentCategoryId;s===t.sort&&a===t.currentCategoryId||(t.sort=s,t.currentCategoryId=a,t.page=1,t.$content.html(""),t.$loadMore.hide(),t.$collapse.hide(),t.loadProducts())}))},e.initSlick=function(){l("[data-slick]",this.$scope).on("init",(function(t){return setTimeout((function(){l("[data-slick-nested]",t.target).each((function(t,e){l(e).slick(l(e).data("slickNested"))}))}),200)})).on("breakpoint",(function(t){return setTimeout((function(){l("[data-slick-nested]",t.target).slick("setPosition")}),200)})).slick()},e.initWidgetRegion=function(){var t=this.$parent.find('[data-pbcst-widget-region="'+this.index+'"]'),e=this.$parent.find('[data-pbcst-widget-region="below_'+this.index+'"]'),o=this.$scope.find('[data-pbcst-widget-region-placement=""]'),i=this.$scope.find('[data-pbcst-widget-region-placement="below"]');o.append(t),i.append(e)},e.initButtons=function(){this.$shopBtn=this.$scope.find("._shopBtn"),this.$loadMore=this.$scope.find(".loadMore").hide(),this.$collapse=this.$scope.find(".collapse").hide(),this.$content.find("[data-current-page]").data("hasNextPage")&&this.$loadMore.show(),this.$loadMore.on("click",this.onLoadMore),this.$collapse.on("click",this.onCollapse)},e.onLoadMore=function(t){t.preventDefault();var e=this.$content.find("[data-current-page]"),o=this.$content.find(".product.hide");if(o.length>0)return o.show().removeClass("hide"),this.$collapse.show(),void(e.data("hasNextPage")||this.$loadMore.hide());e.data("hasNextPage")?(this.page++,this.loadProducts()):this.$loadMore.hide()},e.onCollapse=function(t){t.preventDefault(),this.limit&&(this.$content.find(".product").slice(this.limit).hide().addClass("hide").length>0&&this.$loadMore.show(),l("html, body").animate({scrollTop:this.$content.offset().top},500)),this.$collapse.hide()},t}(),p=function(){function t(t){var e;this.$scope=t,this.lazy=this.$scope.is("[data-lazy]"),this.lazyOffset=(null==(e=window.supermarketThemeExtraConfig)?void 0:e.pbcLazyOffset)||300,this.loaded=!1,this.onCheckViewport=r()(this.onCheckViewport.bind(this),100),this.bindEvents(),this.lazy||this.load()}var e=t.prototype;return e.load=function(){var t=this;this.loaded=!0;var e=this.$scope.data("sort"),o=this.$scope.data("limit");String(this.$scope.data("pbcstGroup")).split(",").map((function(i,s){return new h({id:i.trim(),index:s,sort:e,limit:o,$parent:t.$scope})}))},e.bindEvents=function(){var t=this;l("body").one("beforeload.instantload",(function(){return t.unbindEvents()})),this.lazy&&l(window).on("load resize scroll",this.onCheckViewport)},e.unbindEvents=function(){l(window).off("load resize scroll",this.onCheckViewport)},e.onCheckViewport=function(){if(this.loaded)l(window).off("load resize scroll",this.onCheckViewport);else if(this.$scope.is(":visible")){var t=this.lazyOffset,e=this.$scope.offset().top,o=e+this.$scope.outerHeight(),i=l(window).scrollTop();e-t<i+l(window).innerHeight()&&o+t>i&&this.load()}},t}(),u=o(48276),f=o(33270),b=function(){function t(t,e){this.$scope=t,this.context=e,this.$viewportCheck=t.find("[data-viewport-check]"),this.$loading=t.find(".loading").hide(),this.$loadMore=t.find(".loadMore").hide(),this.$collapse=t.find(".collapse").hide(),this.options=this.$scope.data("specialProductsTabs")||{},this.options.lazyCount=Number(this.options.lazyCount)||0,this.options.initCount=Number(this.options.initCount)||0,this.defaultProductsCount=this.options.lazyCount+this.options.initCount,this.onCheckViewport=r()(this.onCheckViewport.bind(this),100),this.onLoadMore=this.onLoadMore.bind(this),this.onCollapse=this.onCollapse.bind(this),this.onTabToggled=this.onTabToggled.bind(this),this.options.showMore&&this.$loadMore.show(),this.bindEvents()}var e=t.prototype;return e.bindEvents=function(){var t=this;f("body").one("beforeload.instantload",(function(){return t.unbindEvents()})),this.$viewportCheck.length>0&&f(window).on("load resize scroll",this.onCheckViewport),this.options.showMore&&this.$loadMore.on("click",this.onLoadMore),this.$collapse.on("click",this.onCollapse),f("[data-tab]",this.$scope).on("toggled",this.onTabToggled)},e.unbindEvents=function(){f(window).off("load resize scroll",this.onCheckViewport),this.$loadMore.off("click",this.onLoadMore),this.$collapse.off("click",this.onCollapse),f("[data-tab]",this.$scope).off("toggled",this.onTabToggled)},e.onCheckViewport=function(){var t=this;this.$viewportCheck.each((function(e,o){var i=f(o);if(i.is(":visible")){var s=i.offset().top,n=s+i.outerHeight(),a=f(window).scrollTop();s-250<a+f(window).innerHeight()&&n+250>a&&(t.loadViewportProducts(i.data("viewportCheck"),i.closest(".tab-content").find([".productGrid",".productList",".productCarousel:not(.blaze-slider)",".productCarousel.blaze-slider .blaze-track"].join(", "))),t.$viewportCheck=t.$viewportCheck.not(i),i.remove())}}))},e.onLoadMore=function(t){var e=this;t.preventDefault();var o=this.$scope.find(".tab-content.is-active"),i=o.find([".productGrid",".productList",".productCarousel:not(.blaze-slider)",".productCarousel.blaze-slider .blaze-track"].join(", ")),s=i.is("[data-slick]"),n=o.find(".productCarousel.blaze-slider"),a=n.length>0;if(o.data("loadedMore")){if(!s&&!a){var r=o.find(".product, .productCarousel-slide").filter(":hidden");r.slice(0,this.defaultProductsCount).show(),r.is(":hidden")||this.$loadMore.hide(),this.$collapse.show()}}else{o.data("loadedMore",!0);var c={products:{featured:{limit:0},top:{limit:0},new:{limit:0}}};switch(o.data("productType")){case"featured":c.products.featured={limit:100};break;case"top":c.products.top_sellers={limit:100};break;default:c.products.new={limit:100}}this.$loading.show(),this.$loadMore.attr("disabled",!0),d.Ay.api.getPage(this.context.urls.search,{template:"papathemes/special-products-tabs/products",config:c},(function(t,r){if(e.$loading.hide(),e.$loadMore.removeAttr("disabled"),!t&&r){var d=o.find(".product, .productCarousel-slide").map((function(t,e){return f(e).data("productId")})).get(),c=f(r).find(".product, .productCarousel-slide").filter((function(t,e){return-1===d.indexOf(f(e).data("productId"))}));if(c.length>0&&(s?i.slick("unslick"):a||c.slice(e.defaultProductsCount).hide(),i.append(c),s&&(i.slick(),i.slick("slickGoTo",d.length)),a)){var l=n.data("blazeSliderInstance");l?(l.totalSlides=i.children().length,l.refresh()):n.data("blazeSliderInstance",new u.A(n.get(0),n.data("blazeSlider")))}c.is(":hidden")||e.$loadMore.hide(),c.length>0&&!s&&!a&&e.$collapse.show()}}))}},e.onCollapse=function(t){t.preventDefault();var e=this.$scope.find(".tab-content.is-active"),o=e.find(".product, .productCarousel-slide");o.slice(this.defaultProductsCount).hide(),this.$collapse.hide(),o.length>this.defaultProductsCount&&this.$loadMore.show(),f("html, body").animate({scrollTop:e.offset().top})},e.onTabToggled=function(t,e){var o=f(f("a",e).attr("href")),i=o.find([".productGrid",".productList",".productCarousel:not(.blaze-slider)",".productCarousel.blaze-slider .blaze-track"].join(", ")).is("[data-slick]");f("[data-slick]",o).slick("setPosition");var s=o.find(".productCarousel.blaze-slider").length>0;this.$viewportCheck.length>0&&this.onCheckViewport();var n=o.find(".product, .productCarousel-slide"),a=n.filter(":visible").length;this.options.showMore&&(!o.data("loadedMore")||n.is(":hidden")?this.$loadMore.show():this.$loadMore.hide(),i||s||(a>this.defaultProductsCount?this.$collapse.show():this.$collapse.hide()))},e.loadViewportProducts=function(t,e){var o=this,i=this.defaultProductsCount,s={products:{featured:{limit:0},top:{limit:0},new:{limit:0}}};switch(t){case"featured":s.products.featured={limit:i};break;case"top_sellers":s.products.top_sellers={limit:i};break;default:s.products.new={limit:i}}var n=e.is("[data-slick]"),a=this.$scope.find('.productCarousel.blaze-slider[data-product-type="'+t+'"]'),r=a.length>0;this.$loading.show(),this.$loadMore.attr("disabled",!0),d.Ay.api.getPage("/",{template:"papathemes/special-products-tabs/products",config:s},(function(t,i){if(o.$loading.hide(),o.$loadMore.removeAttr("disabled"),!t&&i){var s=f(i).find(".product, .productCarousel-slide");if(n&&e.slick("unslick"),e.empty().append(s),n)e.slick();else if(r){var d=a.data("blazeSliderInstance");d?(d.totalSlides=e.children().length,d.refresh()):a.data("blazeSliderInstance",new u.A(a.get(0),a.data("blazeSlider")))}}}))},t}(),$=o(33270),g=function(){function t(t,e){this.$scope=t,this.context=e,this.$loading=t.find(".loading").hide(),this.$loadMore=t.find(".loadMore").hide(),this.$collapse=t.find(".collapse").hide(),this.options={},this.options.product_new_count=Number(this.context.product_new_count)||0,this.options.product_featured_count=Number(this.context.product_featured_count)||0,this.options.product_top_count=Number(this.context.product_top_count)||0,this.type=this.$scope.find("[data-product-type]").data("productType"),this.defaultProductsCount=this.getDefaultProductsCount(),this.onLoadMore=this.onLoadMore.bind(this),this.onCollapse=this.onCollapse.bind(this),t.find(".product, .productCarousel-slide").length>=this.defaultProductsCount&&this.$loadMore.show(),this.bindEvents()}var e=t.prototype;return e.getDefaultProductsCount=function(){return"new"===this.type?this.options.product_new_count:"featured"===this.type?this.options.product_featured_count:"top_sellers"===this.type?this.options.product_top_count:0},e.bindEvents=function(){var t=this;$("body").one("beforeload.instantload",(function(){return t.unbindEvents()})),this.$loadMore.on("click",this.onLoadMore),this.$collapse.on("click",this.onCollapse)},e.unbindEvents=function(){this.$loadMore.off("click",this.onLoadMore),this.$collapse.off("click",this.onCollapse)},e.onLoadMore=function(t){var e=this;t.preventDefault();var o=this.$scope.find([".productGrid",".productList",".productCarousel:not(.blaze-slider)",".productCarousel.blaze-slider .blaze-track"].join(", ")),i=o.is("[data-slick]");if(this.$scope.data("loadedMore")){var s=this.$scope.find(".product").filter(":hidden");s.slice(0,this.defaultProductsCount).show(),s.is(":hidden")||this.$loadMore.hide(),this.$collapse.show()}else{this.$scope.data("loadedMore",!0);var n={products:{featured:{limit:"featured"===this.type?100:0},top_sellers:{limit:"top_sellers"===this.type?100:0},new:{limit:"new"===this.type?100:0}}};this.$loading.show(),this.$loadMore.attr("disabled",!0);var a=this.$scope.find(".blaze-prev, .blaze-next");a.hide(),d.Ay.api.getPage(this.context.urls.search,{template:"papathemes/list-product/products",config:n},(function(t,s){if(e.$loading.hide(),e.$loadMore.removeAttr("disabled"),a.css("display",""),!t&&s){var n=e.$scope.find(".product, .productCarousel-slide").map((function(t,e){return $(e).data("productId")})).get(),r=$(s).find(".product, .productCarousel-slide").filter((function(t,e){return-1===n.indexOf($(e).data("productId"))})),d=e.$scope.find(".productCarousel.blaze-slider"),c=d.length>0;if(r.length>0){if(i?o.slick("unslick"):c||r.slice(e.defaultProductsCount).hide(),o.append(r),i)o.slick(),o.slick("slickGoTo",n.length);else if(c){var l=d.data("blazeSliderInstance");l?(l.totalSlides=o.children().length,l.refresh()):d.data("blazeSliderInstance",new u.A(d.get(0),d.data("blazeSlider")))}}else e.$loadMore.hide(),e.$collapse.hide();r.is(":hidden")||e.$loadMore.hide(),r.length>0&&!i&&!c&&e.$collapse.show()}}))}},e.onCollapse=function(t){t.preventDefault();var e=this.$scope.find(".product");e.slice(this.defaultProductsCount).hide(),this.$collapse.hide(),e.length>this.defaultProductsCount&&this.$loadMore.show(),$("html, body").animate({scrollTop:this.$scope.offset().top})},t}(),v=o(33270),w=["responsive"],C=["breakpoint"],k=["breakpoint"];function m(t,e){if(null==t)return{};var o={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.includes(i))continue;o[i]=t[i]}return o}function y(t,e){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},y(t,e)}var M=function(t){function e(){return t.apply(this,arguments)||this}var o,i;i=t,(o=e).prototype=Object.create(i.prototype),o.prototype.constructor=o,y(o,i);var n=e.prototype;return n.onReady=function(){this.initProductsByCategorySection(),this.initSpecialProductsTabsSection(),this.initProductLoadMore(),this.fixHomeBrandsCarousel(),v("#yotpo_testimonials_btn_copy").on("click",(function(t){t.preventDefault(),v("#yotpo_testimonials_btn").trigger("click")}))},n.initProductsByCategorySection=function(){var t;this.context.haspbcst&&(void 0===t&&(t="[data-pbcst-group]"),l(t).each((function(t,e){return new p(l(e))})))},n.initSpecialProductsTabsSection=function(){var t,e,o;this.context.hasSpecialProductsTabs&&(t={context:this.context},o=t.context,f(void 0===(e=t.selector)?"[data-special-products-tabs]":e).each((function(t,e){var i=f(e);i.data("specialProductsTabsInstance")||i.data("specialProductsTabsInstance",new b(i,o))})))},n.initProductLoadMore=function(){var t,e,o;(this.context.hasFeaturedProducts||this.context.hasNewProducts||this.context.hasTopProducts)&&(t={context:this.context},o=t.context,$((void 0===(e=t.selectors)?[".beautify__section--newProducts",".beautify__section--featuredProducts",".beautify__section--topProducts"]:e).join(", ")).each((function(t,e){var i=$(e);i.data("productLoadMoreInstance")||i.data("productLoadMoreInstance",new g(i,o))})))},n.fixHomeBrandsCarousel=function(){var t=v("[data-home-brands-slick]");if(0!==t.length){var e=t.data("homeBrandsSlick"),o=e.responsive,i=m(e,w),n=o.map((function(t){return Object.assign({},i,{breakpoint:t.breakpoint},t.settings)})),a=function(){var t=v(window).innerWidth();return n.reduce((function(e,o){return o.breakpoint>=t?o:e}),i)},r=a(),d=r.breakpoint,c=m(r,C);t.slick(c),v(window).on("resize",s()((function(){var e=a(),o=e.breakpoint,i=m(e,k);o!==d&&(d=o,c=i,t.slick("unslick").slick(c))}),500))}},e}(n.A)}}]);
//# sourceMappingURL=theme-bundle.chunk.929.js.map