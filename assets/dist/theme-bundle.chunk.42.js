"use strict";(self.webpackChunkpapathemes_mooncat=self.webpackChunkpapathemes_mooncat||[]).push([[42],{31042:(t,i,o)=>{o.r(i),o.d(i,{default:()=>m});var e=o(23279),s=o.n(e),n=o(72488),a=o(23493),r=o.n(a),d=o(42066),c=o(98662),l=o(55825),h=function(){function t(t){var i=t.id,o=t.index,e=void 0===o?0:o,s=t.sort,n=void 0===s?"":s,a=t.limit,r=void 0===a?"":a,d=t.$parent;this.onLoadMore=this.onLoadMore.bind(this),this.onCollapse=this.onCollapse.bind(this),this.id=i,this.currentCategoryId=i,this.index=e,this.sort=n,this.limit=r,this.page=1,this.$parent=d,this.$scope=l('<div class="papathemes-pbcst-loading"></div>'),this.$shopBtn=l(),this.$loadMore=l(),this.$collapse=l(),this.$loader=l(),this.$parent.append(this.$scope),this.init()}var i=t.prototype;return i.init=function(){var t=this,i=this.limit?"&limit="+this.limit:"",o=this.sort?"&sort="+this.sort:"";d.ZP.api.getPage("/categories.php?category="+this.currentCategoryId+i+o,{template:"papathemes/pbcst/section"},(function(i,o){if(i||!o||o.error)t.$scope.remove();else{var e=l(o);t.$scope.replaceWith(e),t.$scope=e,t.$content=t.$scope.find("[data-pbcst-products-placement]"),t.$loader=t.$scope.find(".loader"),t.initTabs(),t.initSlick(),t.initWidgetRegion(),t.initButtons()}}))},i.loadProducts=function(t){var i=this,o=this.currentCategoryId||this.id,e=this.limit?"&limit="+this.limit:"",s=this.sort?"&sort="+this.sort:"",n=this.page?"&page="+this.page:"";this.$loader.addClass("loading"),d.ZP.api.getPage("/categories.php?category="+o+e+s+n,{template:"papathemes/pbcst/products"},(function(o,e){if(i.$loader.removeClass("loading"),!o&&e){var s=l(e),n=i.$content.find("[data-current-page]");n.length>0?(n.data({currentPage:s.data("currentPage"),hasNextPage:Boolean(s.data("hasNextPage"))}),n.find(".productGrid").append(s.find(".productGrid").children())):i.$content.html(e),i.$content.find(".product._hideOnTabletWhenNoBanner").removeClass("_hideOnTabletWhenNoBanner"),i.initSlick(),s.data("hasNextPage")?i.$loadMore.show():i.$loadMore.hide(),s.data("currentPage")>1?i.$collapse.show():i.$collapse.hide(),i.$shopBtn.get().map((function(t){return l(t)})).forEach((function(t){return t.text(t.data("text").replace("{name}",s.data("categoryName")))})),i.$shopBtn.attr("href",s.data("categoryUrl")),"function"==typeof t&&t()}}))},i.initTabs=function(){var t=this;(0,c.Z)(this.$scope),l("[data-tab]",this.$scope).on("toggled",(function(i,o){var e=o.find("a"),s=e.data("pbcstSort")||t.sort,n=e.data("pbcstSubcategoryId");n&&n===t.currentCategoryId&&(o.removeClass("is-active"),o.find(".tab-title").prop("aria-selected",!1),n=t.id);var a=n||t.currentCategoryId;s===t.sort&&a===t.currentCategoryId||(t.sort=s,t.currentCategoryId=a,t.page=1,t.$content.html(""),t.$loadMore.hide(),t.$collapse.hide(),t.loadProducts())}))},i.initSlick=function(){l("[data-slick]",this.$scope).on("init",(function(t){return setTimeout((function(){l("[data-slick-nested]",t.target).each((function(t,i){l(i).slick(l(i).data("slickNested"))}))}),200)})).on("breakpoint",(function(t){return setTimeout((function(){l("[data-slick-nested]",t.target).slick("setPosition")}),200)})).slick()},i.initWidgetRegion=function(){var t=this.$parent.find('[data-pbcst-widget-region="'+this.index+'"]'),i=this.$parent.find('[data-pbcst-widget-region="below_'+this.index+'"]'),o=this.$scope.find('[data-pbcst-widget-region-placement=""]'),e=this.$scope.find('[data-pbcst-widget-region-placement="below"]');o.append(t),e.append(i)},i.initButtons=function(){this.$shopBtn=this.$scope.find("._shopBtn"),this.$loadMore=this.$scope.find(".loadMore").hide(),this.$collapse=this.$scope.find(".collapse").hide(),this.$content.find("[data-current-page]").data("hasNextPage")&&this.$loadMore.show(),this.$loadMore.on("click",this.onLoadMore),this.$collapse.on("click",this.onCollapse)},i.onLoadMore=function(t){t.preventDefault();var i=this.$content.find("[data-current-page]"),o=this.$content.find(".product.hide");if(o.length>0)return o.show().removeClass("hide"),this.$collapse.show(),void(i.data("hasNextPage")||this.$loadMore.hide());i.data("hasNextPage")?(this.page++,this.loadProducts()):this.$loadMore.hide()},i.onCollapse=function(t){t.preventDefault(),this.limit&&(this.$content.find(".product").slice(this.limit).hide().addClass("hide").length>0&&this.$loadMore.show(),l("html, body").animate({scrollTop:this.$content.offset().top},500)),this.$collapse.hide()},t}(),p=function(){function t(t){var i;this.$scope=t,this.lazy=this.$scope.is("[data-lazy]"),this.lazyOffset=(null==(i=window.supermarketThemeExtraConfig)?void 0:i.pbcLazyOffset)||300,this.loaded=!1,this.onCheckViewport=r()(this.onCheckViewport.bind(this),100),this.bindEvents(),this.lazy||this.load()}var i=t.prototype;return i.load=function(){var t=this;this.loaded=!0;var i=this.$scope.data("sort"),o=this.$scope.data("limit");String(this.$scope.data("pbcstGroup")).split(",").map((function(e,s){return new h({id:e.trim(),index:s,sort:i,limit:o,$parent:t.$scope})}))},i.bindEvents=function(){var t=this;l("body").one("beforeload.instantload",(function(){return t.unbindEvents()})),this.lazy&&l(window).on("load resize scroll",this.onCheckViewport)},i.unbindEvents=function(){l(window).off("load resize scroll",this.onCheckViewport)},i.onCheckViewport=function(){if(this.loaded)l(window).off("load resize scroll",this.onCheckViewport);else if(this.$scope.is(":visible")){var t=this.lazyOffset,i=this.$scope.offset().top,o=i+this.$scope.outerHeight(),e=l(window).scrollTop();i-t<e+l(window).innerHeight()&&o+t>e&&this.load()}},t}(),u=o(55825),f=function(){function t(t,i){this.$scope=t,this.context=i,this.$viewportCheck=t.find("[data-viewport-check]"),this.$loading=t.find(".loading").hide(),this.$loadMore=t.find(".loadMore").hide(),this.$collapse=t.find(".collapse").hide(),this.options=this.$scope.data("specialProductsTabs")||{},this.options.lazyCount=Number(this.options.lazyCount)||0,this.options.initCount=Number(this.options.initCount)||0,this.defaultProductsCount=this.options.lazyCount+this.options.initCount,this.onCheckViewport=r()(this.onCheckViewport.bind(this),100),this.onLoadMore=this.onLoadMore.bind(this),this.onCollapse=this.onCollapse.bind(this),this.onTabToggled=this.onTabToggled.bind(this),this.options.showMore&&this.$loadMore.show(),this.bindEvents()}var i=t.prototype;return i.bindEvents=function(){var t=this;u("body").one("beforeload.instantload",(function(){return t.unbindEvents()})),this.$viewportCheck.length>0&&u(window).on("load resize scroll",this.onCheckViewport),this.options.showMore&&this.$loadMore.on("click",this.onLoadMore),this.$collapse.on("click",this.onCollapse),u("[data-tab]",this.$scope).on("toggled",this.onTabToggled)},i.unbindEvents=function(){u(window).off("load resize scroll",this.onCheckViewport),this.$loadMore.off("click",this.onLoadMore),this.$collapse.off("click",this.onCollapse),u("[data-tab]",this.$scope).off("toggled",this.onTabToggled)},i.onCheckViewport=function(){var t=this;this.$viewportCheck.each((function(i,o){var e=u(o);if(e.is(":visible")){var s=e.offset().top,n=s+e.outerHeight(),a=u(window).scrollTop();s-250<a+u(window).innerHeight()&&n+250>a&&(t.loadViewportProducts(e.data("viewportCheck"),e.closest(".tab-content").find(".productGrid, .productList, .productCarousel")),t.$viewportCheck=t.$viewportCheck.not(e),e.remove())}}))},i.onLoadMore=function(t){var i=this;t.preventDefault();var o=this.$scope.find(".tab-content.is-active"),e=o.find(".productGrid, .productList, .productCarousel"),s=e.is("[data-slick]");if(o.data("loadedMore")){if(!s){var n=o.find(".product, .productCarousel-slide").filter(":hidden");n.slice(0,this.defaultProductsCount).show(),n.is(":hidden")||this.$loadMore.hide(),this.$collapse.show()}}else{o.data("loadedMore",!0);var a={products:{featured:{limit:0},top:{limit:0},new:{limit:0}}};switch(o.data("productType")){case"featured":a.products.featured={limit:100};break;case"top":a.products.top_sellers={limit:100};break;default:a.products.new={limit:100}}this.$loading.show(),this.$loadMore.attr("disabled",!0),d.ZP.api.getPage(this.context.urls.search,{template:"papathemes/special-products-tabs/products",config:a},(function(t,n){if(i.$loading.hide(),i.$loadMore.removeAttr("disabled"),!t&&n){var a=o.find(".product, .productCarousel-slide").map((function(t,i){return u(i).data("productId")})).get(),r=u(n).find(".product, .productCarousel-slide").filter((function(t,i){return-1===a.indexOf(u(i).data("productId"))}));r.length>0&&(s?e.slick("unslick"):r.slice(i.defaultProductsCount).hide(),e.append(r),s&&e.slick(),e.slick("slickGoTo",a.length)),r.is(":hidden")||i.$loadMore.hide(),r.length>0&&!s&&i.$collapse.show()}}))}},i.onCollapse=function(t){t.preventDefault();var i=this.$scope.find(".tab-content.is-active"),o=i.find(".product, .productCarousel-slide");o.slice(this.defaultProductsCount).hide(),this.$collapse.hide(),o.length>this.defaultProductsCount&&this.$loadMore.show(),u("html, body").animate({scrollTop:i.offset().top})},i.onTabToggled=function(t,i){var o=u(u("a",i).attr("href")),e=o.find(".productGrid, .productList, .productCarousel").is("[data-slick]");u("[data-slick]",o).slick("setPosition"),this.$viewportCheck.length>0&&this.onCheckViewport();var s=o.find(".product, .productCarousel-slide"),n=s.filter(":visible").length;this.options.showMore&&(!o.data("loadedMore")||s.is(":hidden")?this.$loadMore.show():this.$loadMore.hide(),e||(n>this.defaultProductsCount?this.$collapse.show():this.$collapse.hide()))},i.loadViewportProducts=function(t,i){var o=this,e=this.defaultProductsCount,s={products:{featured:{limit:0},top:{limit:0},new:{limit:0}}};switch(t){case"featured":s.products.featured={limit:e};break;case"top":s.products.top_sellers={limit:e};break;default:s.products.new={limit:e}}var n=i.is("[data-slick]");n||this.$loading.show(),d.ZP.api.getPage("/",{template:"papathemes/special-products-tabs/products",config:s},(function(t,e){if(o.$loading.hide(),!t&&e){var s=u(e).find(".product, .productCarousel-slide");n&&i.slick("unslick"),i.empty().append(s),n&&i.slick()}}))},t}(),g=o(55825),$=["responsive"],b=["breakpoint"],v=["breakpoint"];function w(t,i){if(null==t)return{};var o,e,s={},n=Object.keys(t);for(e=0;e<n.length;e++)o=n[e],i.indexOf(o)>=0||(s[o]=t[o]);return s}function k(t,i){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},k(t,i)}var m=function(t){var i,o;function e(){return t.apply(this,arguments)||this}o=t,(i=e).prototype=Object.create(o.prototype),i.prototype.constructor=i,k(i,o);var n=e.prototype;return n.onReady=function(){this.initProductsByCategorySection(),this.initSpecialProductsTabsSection(),this.fixHomeBrandsCarousel(),g("#yotpo_testimonials_btn_copy").on("click",(function(t){t.preventDefault(),g("#yotpo_testimonials_btn").trigger("click")}))},n.initProductsByCategorySection=function(){var t;this.context.haspbcst&&(void 0===t&&(t="[data-pbcst-group]"),l(t).each((function(t,i){return new p(l(i))})))},n.initSpecialProductsTabsSection=function(){var t,i,o;this.context.hasSpecialProductsTabs&&(t={context:this.context},o=t.context,u(void 0===(i=t.selector)?"[data-special-products-tabs]":i).each((function(t,i){var e=u(i);e.data("specialProductsTabsInstance")||e.data("specialProductsTabsInstance",new f(e,o))})))},n.fixHomeBrandsCarousel=function(){var t=g("[data-home-brands-slick]");if(0!==t.length){var i=t.data("homeBrandsSlick"),o=i.responsive,e=w(i,$),n=o.map((function(t){return Object.assign({},e,{breakpoint:t.breakpoint},t.settings)})),a=function(){var t=g(window).innerWidth();return n.reduce((function(i,o){return o.breakpoint>=t?o:i}),e)},r=a(),d=r.breakpoint,c=w(r,b);t.slick(c),g(window).on("resize",s()((function(){var i=a(),o=i.breakpoint,e=w(i,v);o!==d&&(d=o,c=e,t.slick("unslick").slick(c))}),500))}},e}(n.Z)}}]);
//# sourceMappingURL=theme-bundle.chunk.42.js.map
